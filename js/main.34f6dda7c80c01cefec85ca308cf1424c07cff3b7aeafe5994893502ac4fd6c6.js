(()=>{document.addEventListener("DOMContentLoaded",()=>{j()});function j(){document.querySelectorAll(".projects-carousel").forEach(c=>{y(c,".project-card")}),document.querySelectorAll(".talks-carousel").forEach(c=>{y(c,".talk-card")})}function y(n,a){let c=n.querySelector(".projects-carousel-track, .talks-carousel-track"),l=n.parentElement.querySelector(".carousel-prev"),d=n.parentElement.querySelector(".carousel-next"),p=n.closest(".project-type-section, .talks-section"),o=p?.querySelector(".carousel-indicators");if(!c)return;let f=Array.from(c.querySelectorAll(a));if(f.length===0)return;let s=1;if(a===".project-card"){let e=n.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?s=3:s=2}let i=Math.ceil(f.length/s);console.log("Carousel initialized:",{cardSelector:a,cardsCount:f.length,itemsPerPage:s,totalPages:i,sectionClass:p?.className,hasIndicatorContainer:!!o});let t=0;if(o){console.log("Before clearing indicators:",o.children.length),o.innerHTML="",console.log("Creating",i,"indicators");for(let e=0;e<i;e++){let r=document.createElement("button");r.classList.add("carousel-indicator"),r.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&r.classList.add("active"),r.addEventListener("click",()=>k(e)),o.appendChild(r),console.log("Added indicator",e+1,"of",i,"- container now has",o.children.length,"children")}}function u(){let e=100/s,r=-t*e*s;c.style.transform=`translateX(${r}%)`,o&&o.querySelectorAll(".carousel-indicator").forEach((C,L)=>{C.classList.toggle("active",L===t)}),l&&(l.disabled=t===0),d&&(d.disabled=t===i-1)}function k(e){t=Math.max(0,Math.min(e,i-1)),u()}function g(){t<i-1&&(t++,u())}function h(){t>0&&(t--,u())}d&&d.addEventListener("click",g),l&&l.addEventListener("click",h),n.addEventListener("keydown",e=>{e.key==="ArrowLeft"?h():e.key==="ArrowRight"&&g()}),u()}console.log("Portfolio site loaded");})();
