(()=>{document.addEventListener("DOMContentLoaded",()=>{w()});function w(){let o=document.querySelectorAll(".projects-carousel");console.log("Found",o.length,"project carousels"),o.forEach((s,i)=>{console.log("Initializing project carousel",i+1,"of",o.length),A(s,".project-card")});let l=document.querySelectorAll(".talks-carousel");console.log("Found",l.length,"talks carousels"),l.forEach((s,i)=>{console.log("Initializing talks carousel",i+1,"of",l.length),A(s,".talk-card")})}function A(o,l){let s=o.querySelector(".projects-carousel-track, .talks-carousel-track"),i=o.parentElement.querySelector(".carousel-prev"),d=o.parentElement.querySelector(".carousel-next"),h=o.closest(".project-type-section, .talks-section"),t=h?.querySelector(".carousel-indicators");if(!s)return;let u=Array.from(s.querySelectorAll(l));if(u.length===0)return;let r=1;if(l===".project-card"){let e=o.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?r=3:r=2}let a=Math.ceil(u.length/r),y=o.querySelector(".projects-carousel-wrapper, .talks-carousel-wrapper").offsetWidth,p=24,j=(r-1)*p,f=(y-j)/r;u.forEach(e=>{e.style.width=`${f}px`,e.style.minWidth=`${f}px`}),console.log("Carousel initialized:",{cardSelector:l,cardsCount:u.length,itemsPerPage:r,totalPages:a,wrapperWidth:y,cardWidth:f,gap:p,sectionClass:h?.className,hasIndicatorContainer:!!t});let n=0;if(t){console.log("Before clearing indicators:",t.children.length),t.innerHTML="",console.log("Creating",a,"indicators");for(let e=0;e<a;e++){let c=document.createElement("button");c.classList.add("carousel-indicator"),c.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&c.classList.add("active"),c.addEventListener("click",()=>L(e)),t.appendChild(c),console.log("Added indicator",e+1,"of",a,"- container now has",t.children.length,"children")}}function g(){console.log("updateCarousel START - indicators:",t?.children.length);let e=-(n*(f*r+p*r));if(s.style.transform=`translateX(${e}px)`,console.log("After transform - indicators:",t?.children.length,"offset:",e),t){let c=t.querySelectorAll(".carousel-indicator");console.log("Found",c.length,"indicator elements to update"),c.forEach((m,v)=>{m.classList.toggle("active",v===n)}),console.log("After toggle - indicators:",t.children.length)}i&&(i.disabled=n===0),d&&(d.disabled=n===a-1)}function L(e){n=Math.max(0,Math.min(e,a-1)),g()}function k(){n<a-1&&(n++,g())}function C(){n>0&&(n--,g())}d&&d.addEventListener("click",k),i&&i.addEventListener("click",C),o.addEventListener("keydown",e=>{e.key==="ArrowLeft"?C():e.key==="ArrowRight"&&k()}),g(),setTimeout(()=>{console.log("After initialization, indicator container has",t?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
