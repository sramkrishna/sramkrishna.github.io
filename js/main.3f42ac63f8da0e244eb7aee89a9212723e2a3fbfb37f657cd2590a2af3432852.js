(()=>{document.addEventListener("DOMContentLoaded",()=>{j()});function j(){let o=document.querySelectorAll(".projects-carousel");console.log("Found",o.length,"project carousels"),o.forEach((l,i)=>{console.log("Initializing project carousel",i+1,"of",o.length),y(l,".project-card")});let c=document.querySelectorAll(".talks-carousel");console.log("Found",c.length,"talks carousels"),c.forEach((l,i)=>{console.log("Initializing talks carousel",i+1,"of",c.length),y(l,".talk-card")})}function y(o,c){let l=o.querySelector(".projects-carousel-track, .talks-carousel-track"),i=o.parentElement.querySelector(".carousel-prev"),d=o.parentElement.querySelector(".carousel-next"),f=o.closest(".project-type-section, .talks-section"),t=f?.querySelector(".carousel-indicators");if(!l)return;let g=Array.from(l.querySelectorAll(c));if(g.length===0)return;let a=1;if(c===".project-card"){let e=o.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?a=3:a=2}let r=Math.ceil(g.length/a);console.log("Carousel initialized:",{cardSelector:c,cardsCount:g.length,itemsPerPage:a,totalPages:r,sectionClass:f?.className,hasIndicatorContainer:!!t});let n=0;if(t){console.log("Before clearing indicators:",t.children.length),t.innerHTML="",console.log("Creating",r,"indicators");for(let e=0;e<r;e++){let s=document.createElement("button");s.classList.add("carousel-indicator"),s.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&s.classList.add("active"),s.addEventListener("click",()=>C(e)),t.appendChild(s),console.log("Added indicator",e+1,"of",r,"- container now has",t.children.length,"children")}}function u(){console.log("updateCarousel START - indicators:",t?.children.length);let e=100/a,s=-n*e*a;if(l.style.transform=`translateX(${s}%)`,console.log("After transform - indicators:",t?.children.length),t){let k=t.querySelectorAll(".carousel-indicator");console.log("Found",k.length,"indicator elements to update"),k.forEach((A,L)=>{A.classList.toggle("active",L===n)}),console.log("After toggle - indicators:",t.children.length)}i&&(i.disabled=n===0),d&&(d.disabled=n===r-1)}function C(e){n=Math.max(0,Math.min(e,r-1)),u()}function h(){n<r-1&&(n++,u())}function p(){n>0&&(n--,u())}d&&d.addEventListener("click",h),i&&i.addEventListener("click",p),o.addEventListener("keydown",e=>{e.key==="ArrowLeft"?p():e.key==="ArrowRight"&&h()}),u(),setTimeout(()=>{console.log("After initialization, indicator container has",t?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
