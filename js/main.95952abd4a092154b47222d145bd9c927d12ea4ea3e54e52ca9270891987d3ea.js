(()=>{document.addEventListener("DOMContentLoaded",()=>{v()});function v(){let o=document.querySelectorAll(".projects-carousel");console.log("Found",o.length,"project carousels"),o.forEach((l,i)=>{console.log("Initializing project carousel",i+1,"of",o.length),A(l,".project-card")});let s=document.querySelectorAll(".talks-carousel");console.log("Found",s.length,"talks carousels"),s.forEach((l,i)=>{console.log("Initializing talks carousel",i+1,"of",s.length),A(l,".talk-card")})}function A(o,s){let l=o.querySelector(".projects-carousel-track, .talks-carousel-track"),i=o.parentElement.querySelector(".carousel-prev"),u=o.parentElement.querySelector(".carousel-next"),k=o.closest(".project-type-section, .talks-section"),t=k?.querySelector(".carousel-indicators");if(!l)return;let g=Array.from(l.querySelectorAll(s));if(g.length===0)return;let n=1;if(s===".project-card"){let e=o.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?n=3:n=2}let a=Math.ceil(g.length/n),h=o.querySelector(".projects-carousel-wrapper, .talks-carousel-wrapper").clientWidth,j=window.getComputedStyle(l),p=parseFloat(j.gap)||24,y=(n-1)*p,d=(h-y)/n;g.forEach(e=>{e.style.width=`${d}px`,e.style.minWidth=`${d}px`}),console.log("Carousel measurements:",{wrapperWidth:h,computedGap:p,totalGapWidth:y,cardWidth:d,calculatedTotalWidth:d*n+y}),console.log("Carousel initialized:",{cardSelector:s,cardsCount:g.length,itemsPerPage:n,totalPages:a,wrapperWidth:h,cardWidth:d,gap:p,sectionClass:k?.className,hasIndicatorContainer:!!t});let c=0;if(t){console.log("Before clearing indicators:",t.children.length),t.innerHTML="",console.log("Creating",a,"indicators");for(let e=0;e<a;e++){let r=document.createElement("button");r.classList.add("carousel-indicator"),r.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&r.classList.add("active"),r.addEventListener("click",()=>w(e)),t.appendChild(r),console.log("Added indicator",e+1,"of",a,"- container now has",t.children.length,"children")}}function f(){console.log("updateCarousel START - indicators:",t?.children.length);let e=-(c*(d*n+p*(n-1)));if(l.style.transform=`translateX(${e}px)`,console.log("After transform - indicators:",t?.children.length,"offset:",e),t){let r=t.querySelectorAll(".carousel-indicator");console.log("Found",r.length,"indicator elements to update"),r.forEach((L,S)=>{L.classList.toggle("active",S===c)}),console.log("After toggle - indicators:",t.children.length)}i&&(i.disabled=c===0),u&&(u.disabled=c===a-1)}function w(e){c=Math.max(0,Math.min(e,a-1)),f()}function m(){c<a-1&&(c++,f())}function C(){c>0&&(c--,f())}u&&u.addEventListener("click",m),i&&i.addEventListener("click",C),o.addEventListener("keydown",e=>{e.key==="ArrowLeft"?C():e.key==="ArrowRight"&&m()}),f(),setTimeout(()=>{console.log("After initialization, indicator container has",t?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
