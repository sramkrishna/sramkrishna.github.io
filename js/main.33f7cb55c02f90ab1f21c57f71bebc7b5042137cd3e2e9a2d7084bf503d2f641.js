(()=>{document.addEventListener("DOMContentLoaded",()=>{q()});function q(){let t=document.querySelectorAll(".projects-carousel");console.log("Found",t.length,"project carousels"),t.forEach((c,r)=>{console.log("Initializing project carousel",r+1,"of",t.length),j(c,".project-card")});let s=document.querySelectorAll(".talks-carousel");console.log("Found",s.length,"talks carousels"),s.forEach((c,r)=>{console.log("Initializing talks carousel",r+1,"of",s.length),j(c,".talk-card")})}function j(t,s){let c=t.querySelector(".projects-carousel-track, .talks-carousel-track"),r=t.parentElement.querySelector(".carousel-prev"),u=t.parentElement.querySelector(".carousel-next"),C=t.closest(".project-type-section, .talks-section"),o=C?.querySelector(".carousel-indicators");if(!c)return;let p=Array.from(c.querySelectorAll(s));if(p.length===0)return;let l=1;if(s===".project-card"){let e=t.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?l=3:l=2}let a=Math.ceil(p.length/l),h=t.querySelector(".projects-carousel-wrapper, .talks-carousel-wrapper").clientWidth,w=window.getComputedStyle(c),g=parseFloat(w.gap)||24,y=(l-1)*g,d=(h-y)/l;p.forEach(e=>{e.style.width=`${d}px`,e.style.minWidth=`${d}px`}),console.log("Carousel measurements:",{wrapperWidth:h,computedGap:g,totalGapWidth:y,cardWidth:d,calculatedTotalWidth:d*l+y}),console.log("Carousel initialized:",{cardSelector:s,cardsCount:p.length,itemsPerPage:l,totalPages:a,wrapperWidth:h,cardWidth:d,gap:g,sectionClass:C?.className,hasIndicatorContainer:!!o});let n=0;if(o){console.log("Before clearing indicators:",o.children.length),o.innerHTML="",console.log("Creating",a,"indicators");for(let e=0;e<a;e++){let i=document.createElement("button");i.classList.add("carousel-indicator"),i.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&i.classList.add("active"),i.addEventListener("click",()=>L(e)),o.appendChild(i),console.log("Added indicator",e+1,"of",a,"- container now has",o.children.length,"children")}}function f(){console.log("updateCarousel START - indicators:",o?.children.length);let e=n*l,i=-(e*(d+g));if(c.style.transform=`translateX(${i}px)`,console.log("After transform - page:",n,"firstCardIndex:",e,"offset:",i),o){let A=o.querySelectorAll(".carousel-indicator");console.log("Found",A.length,"indicator elements to update"),A.forEach((S,v)=>{S.classList.toggle("active",v===n)}),console.log("After toggle - indicators:",o.children.length)}r&&(r.disabled=n===0),u&&(u.disabled=n===a-1)}function L(e){n=Math.max(0,Math.min(e,a-1)),f()}function k(){n<a-1&&(n++,f())}function m(){n>0&&(n--,f())}u&&u.addEventListener("click",k),r&&r.addEventListener("click",m),t.addEventListener("keydown",e=>{e.key==="ArrowLeft"?m():e.key==="ArrowRight"&&k()}),f(),setTimeout(()=>{console.log("After initialization, indicator container has",o?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
