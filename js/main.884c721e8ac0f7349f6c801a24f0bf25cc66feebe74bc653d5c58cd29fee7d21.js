(()=>{document.addEventListener("DOMContentLoaded",()=>{v()});function v(){let o=document.querySelectorAll(".projects-carousel");console.log("Found",o.length,"project carousels"),o.forEach((l,i)=>{console.log("Initializing project carousel",i+1,"of",o.length),y(l,".project-card")});let c=document.querySelectorAll(".talks-carousel");console.log("Found",c.length,"talks carousels"),c.forEach((l,i)=>{console.log("Initializing talks carousel",i+1,"of",c.length),y(l,".talk-card")})}function y(o,c){let l=o.querySelector(".projects-carousel-track, .talks-carousel-track"),i=o.parentElement.querySelector(".carousel-prev"),d=o.parentElement.querySelector(".carousel-next"),f=o.closest(".project-type-section, .talks-section"),t=f?.querySelector(".carousel-indicators");if(!l)return;let u=Array.from(l.querySelectorAll(c));if(u.length===0)return;let s=1;if(c===".project-card"){let e=o.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?s=3:s=2}let r=Math.ceil(u.length/s);console.log("Carousel initialized:",{cardSelector:c,cardsCount:u.length,itemsPerPage:s,totalPages:r,sectionClass:f?.className,hasIndicatorContainer:!!t});let n=0;if(t){console.log("Before clearing indicators:",t.children.length),t.innerHTML="",console.log("Creating",r,"indicators");for(let e=0;e<r;e++){let a=document.createElement("button");a.classList.add("carousel-indicator"),a.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&a.classList.add("active"),a.addEventListener("click",()=>C(e)),t.appendChild(a),console.log("Added indicator",e+1,"of",r,"- container now has",t.children.length,"children")}}function g(){console.log("updateCarousel START - indicators:",t?.children.length);let e=n*s,a=u.length-e,S=Math.min(s,a),m=100/s,A=-e*m;if(l.style.transform=`translateX(${A}%)`,console.log("After transform - indicators:",t?.children.length),t){let k=t.querySelectorAll(".carousel-indicator");console.log("Found",k.length,"indicator elements to update"),k.forEach((L,j)=>{L.classList.toggle("active",j===n)}),console.log("After toggle - indicators:",t.children.length)}i&&(i.disabled=n===0),d&&(d.disabled=n===r-1)}function C(e){n=Math.max(0,Math.min(e,r-1)),g()}function h(){n<r-1&&(n++,g())}function p(){n>0&&(n--,g())}d&&d.addEventListener("click",h),i&&i.addEventListener("click",p),o.addEventListener("keydown",e=>{e.key==="ArrowLeft"?p():e.key==="ArrowRight"&&h()}),g(),setTimeout(()=>{console.log("After initialization, indicator container has",t?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
