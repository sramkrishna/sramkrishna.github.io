(()=>{document.addEventListener("DOMContentLoaded",()=>{L()});function L(){document.querySelectorAll(".projects-carousel").forEach(s=>{k(s,".project-card")}),document.querySelectorAll(".talks-carousel").forEach(s=>{k(s,".talk-card")})}function k(o,a){let s=o.querySelector(".projects-carousel-track, .talks-carousel-track"),l=o.parentElement.querySelector(".carousel-prev"),d=o.parentElement.querySelector(".carousel-next"),r=o.closest(".project-type-section, .talks-section")?.querySelector(".carousel-indicators");if(!s)return;let f=Array.from(s.querySelectorAll(a));if(f.length===0)return;let i=1;if(a===".project-card"){let t=o.closest(".project-type-section");t&&t.classList.contains("project-type-projects")?i=3:i=2}let n=Math.ceil(f.length/i);console.log("Carousel initialized:",{cardSelector:a,cardsCount:f.length,itemsPerPage:i,totalPages:n,sectionClass:o.closest(".project-type-section")?.className});let e=0;if(r){r.innerHTML="";for(let t=0;t<n;t++){let c=document.createElement("button");c.classList.add("carousel-indicator"),c.setAttribute("aria-label",`Go to page ${t+1}`),t===0&&c.classList.add("active"),c.addEventListener("click",()=>g(t)),r.appendChild(c)}}function u(){let t=100/i,c=-e*t*i;s.style.transform=`translateX(${c}%)`,r&&r.querySelectorAll(".carousel-indicator").forEach((C,h)=>{C.classList.toggle("active",h===e)}),l&&(l.disabled=e===0),d&&(d.disabled=e===n-1)}function g(t){e=Math.max(0,Math.min(t,n-1)),u()}function p(){e<n-1&&(e++,u())}function y(){e>0&&(e--,u())}d&&d.addEventListener("click",p),l&&l.addEventListener("click",y),o.addEventListener("keydown",t=>{t.key==="ArrowLeft"?y():t.key==="ArrowRight"&&p()}),u()}console.log("Portfolio site loaded");})();
