(()=>{document.addEventListener("DOMContentLoaded",()=>{v()});function v(){let t=document.querySelectorAll(".projects-carousel");console.log("Found",t.length,"project carousels"),t.forEach((c,i)=>{console.log("Initializing project carousel",i+1,"of",t.length),A(c,".project-card")});let s=document.querySelectorAll(".talks-carousel");console.log("Found",s.length,"talks carousels"),s.forEach((c,i)=>{console.log("Initializing talks carousel",i+1,"of",s.length),A(c,".talk-card")})}function A(t,s){let c=t.querySelector(".projects-carousel-track, .talks-carousel-track"),i=t.parentElement.querySelector(".carousel-prev"),u=t.parentElement.querySelector(".carousel-next"),C=t.closest(".project-type-section, .talks-section"),o=C?.querySelector(".carousel-indicators");if(!c)return;let p=Array.from(c.querySelectorAll(s));if(p.length===0)return;let l=1;if(s===".project-card"){let e=t.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?l=3:l=2}let a=Math.ceil(p.length/l),g=t.querySelector(".projects-carousel-wrapper, .talks-carousel-wrapper").clientWidth,j=window.getComputedStyle(c),f=parseFloat(j.gap)||24,y=(l-1)*f,d=(g-y)/l;p.forEach(e=>{e.style.width=`${d}px`,e.style.minWidth=`${d}px`}),console.log("Carousel measurements:",{wrapperWidth:g,computedGap:f,totalGapWidth:y,cardWidth:d,calculatedTotalWidth:d*l+y}),console.log("Carousel initialized:",{cardSelector:s,cardsCount:p.length,itemsPerPage:l,totalPages:a,wrapperWidth:g,cardWidth:d,gap:f,sectionClass:C?.className,hasIndicatorContainer:!!o});let n=0;if(o){console.log("Before clearing indicators:",o.children.length),o.innerHTML="",console.log("Creating",a,"indicators");for(let e=0;e<a;e++){let r=document.createElement("button");r.classList.add("carousel-indicator"),r.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&r.classList.add("active"),r.addEventListener("click",()=>w(e)),o.appendChild(r),console.log("Added indicator",e+1,"of",a,"- container now has",o.children.length,"children")}}function h(){console.log("updateCarousel START - indicators:",o?.children.length);let e;if(l===1?e=-(n*g):e=-(n*l*(d+f)),c.style.transform=`translateX(${e}px)`,console.log("After transform - page:",n,"offset:",e),o){let r=o.querySelectorAll(".carousel-indicator");console.log("Found",r.length,"indicator elements to update"),r.forEach((L,S)=>{L.classList.toggle("active",S===n)}),console.log("After toggle - indicators:",o.children.length)}i&&(i.disabled=n===0),u&&(u.disabled=n===a-1)}function w(e){n=Math.max(0,Math.min(e,a-1)),h()}function k(){n<a-1&&(n++,h())}function m(){n>0&&(n--,h())}u&&u.addEventListener("click",k),i&&i.addEventListener("click",m),t.addEventListener("keydown",e=>{e.key==="ArrowLeft"?m():e.key==="ArrowRight"&&k()}),h(),setTimeout(()=>{console.log("After initialization, indicator container has",o?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
