(()=>{document.addEventListener("DOMContentLoaded",()=>{j()});function j(){let o=document.querySelectorAll(".projects-carousel");console.log("Found",o.length,"project carousels"),o.forEach((i,c)=>{console.log("Initializing project carousel",c+1,"of",o.length),y(i,".project-card")});let r=document.querySelectorAll(".talks-carousel");console.log("Found",r.length,"talks carousels"),r.forEach((i,c)=>{console.log("Initializing talks carousel",c+1,"of",r.length),y(i,".talk-card")})}function y(o,r){let i=o.querySelector(".projects-carousel-track, .talks-carousel-track"),c=o.parentElement.querySelector(".carousel-prev"),d=o.parentElement.querySelector(".carousel-next"),f=o.closest(".project-type-section, .talks-section"),t=f?.querySelector(".carousel-indicators");if(!i)return;let u=Array.from(i.querySelectorAll(r));if(u.length===0)return;let a=1;if(r===".project-card"){let e=o.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?a=3:a=2}let s=Math.ceil(u.length/a),h=u.length/a*100;i.style.width=`${h}%`,console.log("Carousel initialized:",{cardSelector:r,cardsCount:u.length,itemsPerPage:a,totalPages:s,trackWidthPercent:h,sectionClass:f?.className,hasIndicatorContainer:!!t});let n=0;if(t){console.log("Before clearing indicators:",t.children.length),t.innerHTML="",console.log("Creating",s,"indicators");for(let e=0;e<s;e++){let l=document.createElement("button");l.classList.add("carousel-indicator"),l.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&l.classList.add("active"),l.addEventListener("click",()=>C(e)),t.appendChild(l),console.log("Added indicator",e+1,"of",s,"- container now has",t.children.length,"children")}}function g(){console.log("updateCarousel START - indicators:",t?.children.length);let e=-(n*100);if(i.style.transform=`translateX(${e}%)`,console.log("After transform - indicators:",t?.children.length),t){let l=t.querySelectorAll(".carousel-indicator");console.log("Found",l.length,"indicator elements to update"),l.forEach((A,L)=>{A.classList.toggle("active",L===n)}),console.log("After toggle - indicators:",t.children.length)}c&&(c.disabled=n===0),d&&(d.disabled=n===s-1)}function C(e){n=Math.max(0,Math.min(e,s-1)),g()}function p(){n<s-1&&(n++,g())}function k(){n>0&&(n--,g())}d&&d.addEventListener("click",p),c&&c.addEventListener("click",k),o.addEventListener("keydown",e=>{e.key==="ArrowLeft"?k():e.key==="ArrowRight"&&p()}),g(),setTimeout(()=>{console.log("After initialization, indicator container has",t?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
