(()=>{document.addEventListener("DOMContentLoaded",()=>{L()});function L(){document.querySelectorAll(".projects-carousel").forEach(r=>{g(r,".project-card")}),document.querySelectorAll(".talks-carousel").forEach(r=>{g(r,".talk-card")})}function g(o,a){let r=o.querySelector(".projects-carousel-track, .talks-carousel-track"),l=o.parentElement.querySelector(".carousel-prev"),d=o.parentElement.querySelector(".carousel-next"),i=o.parentElement.querySelector(".carousel-indicators");if(!r)return;let f=Array.from(r.querySelectorAll(a));if(f.length===0)return;let c=1;if(a===".project-card"){let t=o.closest(".project-type-section");t&&t.classList.contains("project-type-projects")?c=3:c=2}let n=Math.ceil(f.length/c);console.log("Carousel initialized:",{cardSelector:a,cardsCount:f.length,itemsPerPage:c,totalPages:n,sectionClass:o.closest(".project-type-section")?.className});let e=0;if(i){i.innerHTML="";for(let t=0;t<n;t++){let s=document.createElement("button");s.classList.add("carousel-indicator"),s.setAttribute("aria-label",`Go to page ${t+1}`),t===0&&s.classList.add("active"),s.addEventListener("click",()=>k(t)),i.appendChild(s)}}function u(){let t=100/c,s=-e*t*c;r.style.transform=`translateX(${s}%)`,i&&i.querySelectorAll(".carousel-indicator").forEach((C,h)=>{C.classList.toggle("active",h===e)}),l&&(l.disabled=e===0),d&&(d.disabled=e===n-1)}function k(t){e=Math.max(0,Math.min(t,n-1)),u()}function p(){e<n-1&&(e++,u())}function y(){e>0&&(e--,u())}d&&d.addEventListener("click",p),l&&l.addEventListener("click",y),o.addEventListener("keydown",t=>{t.key==="ArrowLeft"?y():t.key==="ArrowRight"&&p()}),u()}console.log("Portfolio site loaded");})();
