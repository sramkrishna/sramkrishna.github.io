(()=>{document.addEventListener("DOMContentLoaded",()=>{w()});function w(){let o=document.querySelectorAll(".projects-carousel");console.log("Found",o.length,"project carousels"),o.forEach((s,i)=>{console.log("Initializing project carousel",i+1,"of",o.length),A(s,".project-card")});let l=document.querySelectorAll(".talks-carousel");console.log("Found",l.length,"talks carousels"),l.forEach((s,i)=>{console.log("Initializing talks carousel",i+1,"of",l.length),A(s,".talk-card")})}function A(o,l){let s=o.querySelector(".projects-carousel-track, .talks-carousel-track"),i=o.parentElement.querySelector(".carousel-prev"),d=o.parentElement.querySelector(".carousel-next"),h=o.closest(".project-type-section, .talks-section"),t=h?.querySelector(".carousel-indicators");if(!s)return;let u=Array.from(s.querySelectorAll(l));if(u.length===0)return;let c=1;if(l===".project-card"){let e=o.closest(".project-type-section");e&&e.classList.contains("project-type-projects")?c=3:c=2}let a=Math.ceil(u.length/c),y=o.querySelector(".projects-carousel-wrapper, .talks-carousel-wrapper").clientWidth,p=24,j=(c-1)*p,g=(y-j)/c;u.forEach(e=>{e.style.width=`${g}px`,e.style.minWidth=`${g}px`}),console.log("Carousel initialized:",{cardSelector:l,cardsCount:u.length,itemsPerPage:c,totalPages:a,wrapperWidth:y,cardWidth:g,gap:p,sectionClass:h?.className,hasIndicatorContainer:!!t});let n=0;if(t){console.log("Before clearing indicators:",t.children.length),t.innerHTML="",console.log("Creating",a,"indicators");for(let e=0;e<a;e++){let r=document.createElement("button");r.classList.add("carousel-indicator"),r.setAttribute("aria-label",`Go to page ${e+1}`),e===0&&r.classList.add("active"),r.addEventListener("click",()=>L(e)),t.appendChild(r),console.log("Added indicator",e+1,"of",a,"- container now has",t.children.length,"children")}}function f(){console.log("updateCarousel START - indicators:",t?.children.length);let e=-(n*(g*c+p*c));if(s.style.transform=`translateX(${e}px)`,console.log("After transform - indicators:",t?.children.length,"offset:",e),t){let r=t.querySelectorAll(".carousel-indicator");console.log("Found",r.length,"indicator elements to update"),r.forEach((m,v)=>{m.classList.toggle("active",v===n)}),console.log("After toggle - indicators:",t.children.length)}i&&(i.disabled=n===0),d&&(d.disabled=n===a-1)}function L(e){n=Math.max(0,Math.min(e,a-1)),f()}function k(){n<a-1&&(n++,f())}function C(){n>0&&(n--,f())}d&&d.addEventListener("click",k),i&&i.addEventListener("click",C),o.addEventListener("keydown",e=>{e.key==="ArrowLeft"?C():e.key==="ArrowRight"&&k()}),f(),setTimeout(()=>{console.log("After initialization, indicator container has",t?.children.length,"children")},0)}console.log("Portfolio site loaded");})();
